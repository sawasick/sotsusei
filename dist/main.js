(()=>{var t={251:()=>{$("body").prepend('\n<style>body{min-width:600px !important}.webgazerVideoContainer{display:block;position:fixed !important;top:0px !important;left:0px !important;width:320px !important;height:240px !important;z-index:10000}.calibrationDiv{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(255,255,255,.8);z-index:9999}.Calibration{width:26px;height:26px;border-radius:25px;background-color:#f60509;border-color:#f60509;border-style:solid;position:fixed;cursor:crosshair;font-weight:bold;color:#fff}#Pt1{top:70px;left:340px}#Pt2{top:70px;left:50vw}#Pt3{top:70px;right:2vw}#Pt4{top:50vh;left:2vw}#Pt5{top:50vh;left:50vw}#Pt6{top:50vh;right:2vw}#Pt7{bottom:2vw;left:2vw}#Pt8{bottom:2vw;left:50vw}#Pt9{bottom:2vw;right:2vw}.PtComplete{background-color:#23d91e;border-color:#23d91e}.PtSample{width:22px;height:22px;border-radius:22px;background-color:#23d91e;border-color:#23d91e;font-weight:bold;color:#fff;line-height:1;padding:1.5px 0 0px 3px;display:inline-block}.debugInfo{position:fixed;top:0;left:320px;z-index:100000}.debugInfo ul{display:flex}.debugInfo ul:first-child{margin-bottom:5px}.debugInfo li{margin-right:10px}.debugInfo button{background:#ff7f00;color:#fff;border:none;border-radius:5px;padding:4px}.accuracy{background-color:#222 !important;color:#fff}.status{background-color:#222 !important;color:#fff}.gazing{background-color:#222 !important;color:#fff}.is-hidden{overflow:hidden}.is-hide{display:none}.is-hide--f{display:none !important}.action{background-color:#ff0}.webgazerGazeDot{display:block;position:fixed;z-index:99999;left:-5px;top:-5px;width:10px;height:10px;opacity:.7;background:red;border-radius:100%}.webgazerGazeDot-frame{display:block;width:60px;height:40px;border:2px solid blue;position:absolute;top:-15px;left:-25px;opacity:.7}.pop-overlay{position:fixed;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.4);z-index:10000;display:flex;align-items:center;justify-content:center}.pop-modal{width:500px;background-color:#fff;text-align:center;border-radius:5px;z-index:10001}@media screen and (max-width: 480px){.pop-modal{width:300px}}.pop-modal button:disabled{opacity:.6}.pop-title{color:#333;font-weight:bold;font-size:27px;margin:0;padding:10px 0}@media screen and (max-width: 480px){.pop-title{font-size:18px;padding:8px 0}}.pop-text{font-size:18px;color:#222;width:82%;margin:0 auto;padding:10px 0;text-align:left}@media screen and (max-width: 480px){.pop-text{font-size:14px;width:84%;line-height:2;padding:8px 0}}.pop-btn{width:65px;height:45px;font-weight:bold;color:#fff;background-color:#007bff;border:none;border-radius:7px;position:relative;left:180px;margin-bottom:12px;cursor:pointer}@media screen and (max-width: 480px){.pop-btn{left:90px}}.action-bg{background-color:rgba(255,128,0,.5) !important}</style>\n<canvas id="plotting_canvas" width="500" height="500" style="cursor:crosshair;"></canvas>\n<div class="debugInfo">\n  <ul>\n    <li id="Accuracy" class="accuracy">キャリブレーションは完了していません</li>\n    <li id="CalibrateStatus" class="status">キャリブレーションステータス</li>\n  </ul>\n  <ul>\n    <li>\n      <button type="button" id="pointerDisplay" class="pointerDisplay">視線上の点: 表示</button>\n    </li>\n    <li>\n      <button type="button" id="switchBg" class="switchBg">背景色にアクション: OFF</button>\n    </li>\n    <li>\n      <button type="button" id="switchFs" class="switchFs">文字サイズにアクション: OFF</button>\n    </li>\n  </ul>\n</div>\n\x3c!-- Calibration points --\x3e\n<div id="calibrationDiv" class="calibrationDiv">\n  <button type="button" class="Calibration" id="Pt1">5</button>\n  <button type="button" class="Calibration" id="Pt2">5</button>\n  <button type="button" class="Calibration" id="Pt3">5</button>\n  <button type="button" class="Calibration" id="Pt4">5</button>\n  <button type="button" class="Calibration" id="Pt5">5</button>\n  <button type="button" class="Calibration" id="Pt6">5</button>\n  <button type="button" class="Calibration" id="Pt7">5</button>\n  <button type="button" class="Calibration" id="Pt8">5</button>\n  <button type="button" class="Calibration" id="Pt9">5</button>\n</div>\n\n<div id="helpModal" class="pop-overlay">\n  <div class="pop-modal">\n    <p class="pop-title">WebGazer+</p>\n    <p class="pop-text">本制作ではPCのwebカメラを使用して視線のトラッキングが行えます。</p>\n    <p class="pop-text">トラッキングデータに対してインタラクションやデータ分析が可能です。</p>\n    <button id="closeBtn" class="pop-btn" onclick="CancelCalibration()" disabled>閉じる</button>\n    <button id="start_calibration" class="pop-btn" onclick="Restart()" disabled>始める</button>\n  </div>\n</div>\n')},157:()=>{var t=0,o={};function n(){$(".Calibration").hide();var t=document.getElementById("plotting_canvas");t.getContext("2d").clearRect(0,0,t.width,t.height)}$(document).ready((function(){n(),$("body").addClass("is-hidden"),$(".Calibration").click((function(){var i=$(this).attr("id");if(o[i]||(o[i]=5),o[i]--,$(`#${i}`).html(o[i]),0==o[i]?($(this).addClass("PtComplete"),$(this).html("&#10004;"),$(this).prop("disabled",!0),t++):o[i],8==t&&$("#Pt5").show(),t>=9){$(".Calibration").hide(),$("#Pt5").show();var e=document.getElementById("plotting_canvas");e.getContext("2d").clearRect(0,0,e.width,e.height);const i='\n        <div id="js-pop-measure" class="pop-overlay">\n          <div class="pop-modal">\n          <p class="pop-text">OKを押したらマウスを動かさず、<br>真ん中の点を5秒間見つめてください。</p>\n          <button id="js-pop-measure-btn" class="pop-btn" type="submit">OK</button>\n          </div>\n        </div>\n        ';$("body").append(i),$("#js-pop-measure-btn").on("click",(function(){$("#js-pop-measure").remove(),$(document).ready((function(){store_points_variable(),(5e3,new Promise((t=>setTimeout(t,5e3)))).then((()=>{stop_storing_points_variable();var i=webgazer.getStoredPoints(),e=calculatePrecision(i),a="精度 | "+e+"%";document.getElementById("Accuracy").textContent=a;const d=`\n              <div id="js-pop-result" class="pop-overlay">\n                <div class="pop-modal">\n                <p class="pop-text">精度は${e}%です</p>\n                <button id="js-pop-result-btn-cancel" class="pop-btn" type="submit">やり直し</button>\n                <button id="js-pop-result-btn-confirm" class="pop-btn" type="submit">OK</button>\n                </div>\n              </div>\n              `;$("body").append(d),$("#js-pop-result-btn-confirm").on("click",(function(){n(),$("#js-pop-result").remove(),document.body.classList.remove("is-hidden"),document.getElementById("calibrationDiv").classList.add("is-hide"),CalibrationEnd(),CalibrationComplete(),document.getElementById("webgazerVideoContainer").classList.add("is-hide--f"),document.getElementById("plotting_canvas").remove(),csvData.push(location.href),csvData.push("\n"+e),csvData.push("\n"+innerWidth+","+innerHeight),startTime=Date.now(),$("#webgazerGazeDot span").addClass("webgazerGazeDot-frame")})),$("#js-pop-result-btn-cancel").on("click",(function(){document.getElementById("Accuracy").textContent="キャリブレーションは完了していません",webgazer.clearData(),$(".Calibration").prop("disabled",!1),o={},t=0,n(),$(".Calibration").show(),$("#Pt5").hide()}))}))}))}))}}))}))},693:()=>{var t=!0,o=!1,n=!1;window.onload=async function(){var t;webgazer.params.showVideoPreview=!0,await webgazer.setRegression("ridge").setGazeListener((function(t,o){})).saveDataAcrossSessions(!0).begin(),webgazer.showVideoPreview(!0).showPredictionPoints(!0).applyKalmanFilter(!0),(t=document.getElementById("plotting_canvas")).width=window.innerWidth,t.height=window.innerHeight,t.style.position="fixed"},window.saveDataAcrossSessions=!0,window.onbeforeunload=function(){webgazer.end()},$("#pointerDisplay").on("click",(function(){t?($("#webgazerGazeDot").addClass("is-hide--f"),$(this).html("視線上の点: 非表示"),t=!1):($("#webgazerGazeDot").removeClass("is-hide--f"),$(this).html("視線上の点: 表示"),t=!0)})),$("#switchBg").on("click",(function(){o?($(this).html("背景色にアクション: OFF"),o=!1):($(this).html("背景色にアクション: ON"),o=!0)})),$("#switchFs").on("click",(function(){n?($(this).html("文字サイズにアクション: OFF"),n=!1):($(this).html("文字サイズにアクション: ON"),n=!0)})),window.addEventListener("beforeunload",(function(t){t.preventDefault(),false}))},64:()=>{window.addEventListener("resize",(function(){var t=document.getElementById("plotting_canvas");t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=window.innerWidth,t.height=window.innerHeight}),!1)}},o={};function n(i){var e=o[i];if(void 0!==e)return e.exports;var a=o[i]={exports:{}};return t[i](a,a.exports,n),a.exports}n.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return n.d(o,{a:o}),o},n.d=(t,o)=>{for(var i in o)n.o(o,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})},n.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),(()=>{"use strict";n(251),n(693),n(157),n(64)})()})();